<!DOCTYPE html>
<html>

<script type="text/javascript">
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?639ab28f32e0029ed25324113f0ff34a";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>


<head>
  <meta charset="utf-8">
  
  <title>运维生存时间</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="运维 生存时间 ttl op oa">
<meta property="og:type" content="website">
<meta property="og:title" content="运维生存时间">
<meta property="og:url" content="http://ttlop.com/page/3/index.html">
<meta property="og:site_name" content="运维生存时间">
<meta property="og:description" content="运维 生存时间 ttl op oa">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="运维生存时间">
<meta name="twitter:description" content="运维 生存时间 ttl op oa">
  
    <link rel="alternate" href="/atom.xml" title="运维生存时间" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">运维生存时间</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">业精于勤而荒于嬉，行成于思而毁于随</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/About">About</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://ttlop.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-SSH-无密码登录节点" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/25/SSH-无密码登录节点/" class="article-date">
  <time datetime="2016-11-25T07:29:47.000Z" itemprop="datePublished">2016-11-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux/">Linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/25/SSH-无密码登录节点/">SSH 无密码登录节点</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在配置 Hadoop 的过程中一个必要的步骤是配置 Mster 节点可以无密码 SSH 登录到各个 Slave 节点上。</p>
<p>如下说明配置步骤：</p>
<ol>
<li>生成 Master 节点的公匙（在 Master 节点的终端中执行）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh		#如果没有该目录，先执行一次 ssh localhost</span><br><span class="line">rm -rf ./id_rsa*	#删除之前生成的公钥（如果有）</span><br><span class="line">ssh-keygen -t rsa	#一直按回车就可以</span><br></pre></td></tr></table></figure>
<ol>
<li>配置 Master 节点可以无密码 SSH 本机（在 Master 节点的终端中执行）</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat ./id_rsa.pub &gt;&gt;./authorized_keys</span><br></pre></td></tr></table></figure>
<p>完成后可执行 ssh Master 验证一下（可能需要输入 yes，成功后执行 exit 返回原来的终端）。</p>
<ol>
<li>在 Master 节点将公钥传送到各个 Slave 节点</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scp ~/.ssh/id_rsa.pub root@slave1:/root/</span><br></pre></td></tr></table></figure>
<ol>
<li>在 Slave 节点上，将 Master SSH 公匙加入授权</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/.ssh		#如果不存在该文件夹需要先创建，若存在则忽略</span><br><span class="line">cat ~/id_rsa.pub &gt;&gt;~/.ssh/authorized_keys	</span><br><span class="line">rm ~/id_rsa.pub		#用完就可以删除了</span><br></pre></td></tr></table></figure>
<p>如果有其它 slave 节点，也要执行将 Master 公匙传送到其它 Slave 节点并授权的步骤。</p>
<hr>
<p>至此，在 Master 节点上就可以无密码 SSH 到各个 Slave 节点了。可以在 Master 节点上执行如下命令进行检验：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh slave1</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/11/25/SSH-无密码登录节点/" data-id="cj1ycy7kw0080kupv10dc6f6m" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-查找通过Yum安装的Java的安装路径" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/25/查找通过Yum安装的Java的安装路径/" class="article-date">
  <time datetime="2016-11-25T03:46:47.000Z" itemprop="datePublished">2016-11-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Centos-7/">Centos 7</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/25/查找通过Yum安装的Java的安装路径/">查找通过Yum安装的Java的安装路径</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>很多需要 Javac 的程序依赖于 JAVA_HOME 环境变量。<br>如果是手工下载源码安装的JDK，很容易知道 JAVA_HOME 的目录，那么 YUM 安装的 JDK，不需要配置 PATH，因为已经使用软链接做好了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon hadoop]# echo $PATH</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/root/bin</span><br><span class="line">[root@bogon hadoop]# javac -version</span><br><span class="line">javac 1.8.0_111</span><br></pre></td></tr></table></figure>
<ol>
<li>YUM 安装 JDK</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install -y java*</span><br></pre></td></tr></table></figure>
<ol>
<li>查找 JAVA_HOME</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[root@bogon hadoop]# whereis javac</span><br><span class="line">javac: /usr/bin/javac /usr/share/man/man1/javac.1.gz</span><br><span class="line">[root@bogon hadoop]# ls -l /usr/bin/javac</span><br><span class="line">lrwxrwxrwx. 1 root root 23 11月 23 12:11 /usr/bin/javac -&gt; /etc/alternatives/javac</span><br><span class="line">[root@bogon hadoop]# ls -l /etc/alternatives/javac</span><br><span class="line">lrwxrwxrwx. 1 root root 70 11月 23 12:11 /etc/alternatives/javac -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-1.b15.el7_2.x86_64/bin/javac</span><br><span class="line">[root@bogon hadoop]# whereis java</span><br><span class="line">java: /usr/bin/java /usr/lib/java /etc/java /usr/share/java /usr/share/man/man1/java.1.gz</span><br><span class="line">[root@bogon hadoop]# ls -l /usr/bin/java</span><br><span class="line">lrwxrwxrwx. 1 root root 22 11月 23 12:07 /usr/bin/java -&gt; /etc/alternatives/java</span><br><span class="line">[root@bogon hadoop]# ls -l /etc/alternatives/java</span><br><span class="line">lrwxrwxrwx. 1 root root 73 11月 23 12:07 /etc/alternatives/java -&gt; /usr/lib/jvm/java-1.8.0-openjdk-1.8.0.111-1.b15.el7_2.x86_64/jre/bin/java</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/11/25/查找通过Yum安装的Java的安装路径/" data-id="cj1ycy7nl00bukupvqqf63ysh" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据库镜像-主备切换" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/11/数据库镜像-主备切换/" class="article-date">
  <time datetime="2016-11-11T06:04:59.000Z" itemprop="datePublished">2016-11-11</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Microsoft-SQL-Server/">Microsoft SQL Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/11/数据库镜像-主备切换/">数据库镜像-主备切换</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ol>
<li>高性能状态-主备切换（主机服务停止）</li>
</ol>
<p>主机服务停止，镜像（备机）上执行下列命令后备机状态会变为：<strong>主机 挂起/正在还原…</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE &lt;DatabaseName&gt; SET PARTNER FORCE_SERVICE_ALLOW_DATA_LOSS;</span><br></pre></td></tr></table></figure></p>
<p>此时如原主机再启动服务，会显示挂起状态。执行下列命令后状态会变为：<strong>镜像 已同步/正在还原…</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE &lt;DatabaseName&gt; SET PARTNER RESUME;</span><br></pre></td></tr></table></figure></p>
<p>如果要从原镜像机（即现在的主机）手动切换回镜像状态，需执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE &lt;DatabaseName&gt; SET PARTNER SAFETY FULL;</span><br></pre></td></tr></table></figure></p>
<p>即将运行模式改为高安全，这时状态就会变回最初的状态（即原始的主机和备机）</p>
<ol>
<li>高性能状态下-主备切换（主机网络断开）<br>在原始的主机、备机状态下，将主机网络断开，在备机（镜像）上执行下列命令同样可以实现主备切换：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE &lt;DatabaseName&gt; SET PARTNER FORCE_SERVICE_ALLOW_DATA_LOSS;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>但是此时的备机（镜像）虽然成为了主机，其运行模式为高安全模式，需要手动切换到高性能模式下。然后将主机联网后，在主机上执行：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER DATABASE &lt;DatabaseName&gt; SET PARTNER RESUME;</span><br></pre></td></tr></table></figure></p>
<p>此时主机变为镜像机（镜像，已同步/正在还原…）</p>
<p>高安全模式下，将原主机服务停止，镜像机自动转为主机，但运行模式为高安全模式，此时镜像（相对于现在为主机）是不能调整运行模式的。即不能从高安全调整为高性能模式。只有当原主机网络连通或服务开始运行后在镜像（相对于现在为主机）才可以调整运行模式，同时这时也不允许强制执行。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/11/11/数据库镜像-主备切换/" data-id="cj1ycy7nb00bfkupvsbqvus4q" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-CentOS-系统时间与现在时间相差8小时解决方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/11/10/CentOS-系统时间与现在时间相差8小时解决方法/" class="article-date">
  <time datetime="2016-11-10T01:27:49.000Z" itemprop="datePublished">2016-11-10</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Centos-7/">Centos 7</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/11/10/CentOS-系统时间与现在时间相差8小时解决方法/">CentOS 系统时间与现在时间相差8小时解决方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天安装了一台 CentOS 7 系统，安装好之后发现时间与现在时间相差 8 小时，具体表现如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 0900]# date</span><br><span class="line">2016年 11月 10日 星期四 17:24:18 CST</span><br><span class="line">[root@localhost 0900]# date -u</span><br><span class="line">2016年 11月 10日 星期四 09:24:22 UTC</span><br></pre></td></tr></table></figure>
<p>这是由于我们在安装系统的时候时区是上海，而 CentOS 默认 bios 时间是 UTC 时间，所以相差 8 小时。这个时候 bios 时间和系统时间不一致，一个代表 UTC 时间，一个代表 CST （+8时区），即上海时间。</p>
<p>下面是同步时间的解决方法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime # Linux 时区设置为上海</span><br><span class="line">ntpdate asia.pool.ntp.org # 对准时间，需要先安装ntp服务器，yum install ntp</span><br><span class="line">/sbin/hwclock --systohc # 设置硬件时间和系统时间一致并校准</span><br></pre></td></tr></table></figure>
<p>至此，linux 系统时间和计算机硬件时间都是都是 cst 时区了，并且为上海时区。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost 0900]# date -u</span><br><span class="line">2016年 11月 10日 星期四 01:25:25 UTC</span><br><span class="line">[root@localhost 0900]# date</span><br><span class="line">2016年 11月 10日 星期四 09:25:27 CST</span><br></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/11/10/CentOS-系统时间与现在时间相差8小时解决方法/" data-id="cj1ycy7e4000jkupve5x2zy46" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-CREATE-INDEX" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/27/CREATE-INDEX/" class="article-date">
  <time datetime="2016-10-27T03:50:13.000Z" itemprop="datePublished">2016-10-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Microsoft-SQL-Server/">Microsoft SQL Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/27/CREATE-INDEX/">CREATE INDEX</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="CREATE-INDEX"><a href="#CREATE-INDEX" class="headerlink" title="CREATE INDEX"></a>CREATE INDEX</h2><p>为给定表或视图创建索引。<br>只有表或视图的所有者才能为表创建索引。表或视图的所有者可以随时创建索引，无论表中是否有数据。可以通过指定限定的数据库名称，为另一个数据库中的表或视图视窗索引。</p>
<h3 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CREATE [ UNIQUE ] [ CLUSTERED | NONCLUSTERED ] INDEX index_name</span><br><span class="line">    ON &#123; table | view &#125; ( column [ ASC | DESC ] [ ,...n ] )</span><br><span class="line">[ WITH &lt; index_option &gt; [ ,...n] ]</span><br><span class="line">[ ON filegroup ]</span><br><span class="line"></span><br><span class="line">&lt; index_option &gt; ::=</span><br><span class="line">    &#123; PAD_INDEX |</span><br><span class="line">        FILLFACTOR = fillfactor |</span><br><span class="line">        IGNORE_DUP_KEY |</span><br><span class="line">        DROP_EXISTING |</span><br><span class="line">    STATISTICS_NORECOMPUTE |</span><br><span class="line">    SORT_IN_TEMPDB </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h3><h4 id="UNIQUE"><a href="#UNIQUE" class="headerlink" title="UNIQUE"></a>UNIQUE</h4><p>为表或视图创建唯一索引（不允许存在索引值相同的两行）。视图上的聚簇索引必须是 UNIQUE 索引。<br>在创建索引时，如果数据已存在，SQL Server 会检查是否有重复值，并在每次使用 INSERT 或 UPDATE 语句添加数据时进行这种检查。<br>如果存在重复的键值，将取消 CREATE INDEX 语句，并返回错误信息，给出第一个重复值。<br>如果存在唯一索引，那么会产生重复键值的 UPDATE 或 INSERT 语句将回滚，SQL Server 将显示错误信息。即使 UPDATE 或 INSERT 语句更改了很多行但只产生一个重复值，也会出现这种情况。<br>如果在有唯一索引并指定了 IGNORE_DUP_KEY 子句情况下输入数据，则只有违反 UNIQUE 索引才会失败。在处理 UPDATE 语句时，IGNORE_DUP_KEY 不起作用。<br>SQL Server 不允许为已经包含重复值的列创建唯一索引，无论是否设置了 IGNORE_DUP_KEY。如果尝试这样做，SQL Server 会显示错误信息；重复值必须先删除，才能为这些列创建唯一索引。</p>
<h4 id="CLUSTERED"><a href="#CLUSTERED" class="headerlink" title="CLUSTERED"></a>CLUSTERED</h4><p>创建一个对象，其中行的物理排序与索引排序相同，并且聚簇索引的最低一级（页级）包含实际的数据行。一个表或视图只允许同时有一个聚簇索引。具有聚簇索引的视图称为索引视图。必须先为视图创建唯一聚簇索引，然后才能为该视图定义其它索引。</p>
<p>因为按照定义，聚簇索引的页级与其数据页相同，所以创建聚簇索引时使用 ON filegroup 子句实际上会将表从创建该表所用的文件移到新的文件组中。在特定的文件组上创建表或索引之前，应确认哪些文件组可用并且有足够的空间供索引使用。文件组的大小必须至少是整个表所需空间的 1.2 倍，这一点很重要。</p>
<h4 id="NONCLUSTERED"><a href="#NONCLUSTERED" class="headerlink" title="NONCLUSTERED"></a>NONCLUSTERED</h4><p>创建一个指定表的逻辑排序的对象。对于非聚簇索引，行的物理排序独立于索引排序。非聚簇所应的页级包含索引行。每个索引行均包含非聚簇键值和一个或多个行定位器（指向包含该值的行）。如果表没有聚簇索引行，行定位器就是行的磁盘地址。如果表有聚簇索引，行定位器就是该行的聚簇索引键。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/10/27/CREATE-INDEX/" data-id="cj1ycy7e1000hkupv8l8o1hyn" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据库中聚簇索引和非聚簇索引的区别" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/27/数据库中聚簇索引和非聚簇索引的区别/" class="article-date">
  <time datetime="2016-10-27T02:15:04.000Z" itemprop="datePublished">2016-10-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Microsoft-SQL-Server/">Microsoft SQL Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/27/数据库中聚簇索引和非聚簇索引的区别/">数据库中聚簇索引和非聚簇索引的区别</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在&lt;&lt;数据库原理&gt;&gt;里面，对聚簇索引的解释是：聚簇索引的顺序就是数据的物理存储顺序，而对非聚簇所应的解释是：索引顺序与数据物理排序顺序无关。正是因为如此，所以一个表最多只能有一个聚簇索引。</p>
        
          <p class="article-more-link">
            <a href="/2016/10/27/数据库中聚簇索引和非聚簇索引的区别/#more">Read More</a>
          </p>
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/10/27/数据库中聚簇索引和非聚簇索引的区别/" data-id="cj1ycy7na00bdkupv14wtzd64" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-用-SQL-建立索引的方法" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/27/用-SQL-建立索引的方法/" class="article-date">
  <time datetime="2016-10-27T01:30:49.000Z" itemprop="datePublished">2016-10-27</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Microsoft-SQL-Server/">Microsoft SQL Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/27/用-SQL-建立索引的方法/">用 SQL 建立索引的方法</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h3><p>进入查询窗口后，输入下面的语句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX mycolumn_index ON mytable(mycolumn)</span><br></pre></td></tr></table></figure>
<p>这个语句建立了一个名为 mycolumn_index 的索引。索引对表 mytable 的 mycolumn 字段进行，这是一个非聚簇索引，也是一个非唯一索引。（这是一个索引的缺省属性）</p>
<h3 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h3><p>如果需要改变一个索引的类型，必须删除原来的索引并重新创建一个。可以用下面的 SQL 语句删除它：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DROP INDEX mytable.mycolumn_index</span><br></pre></td></tr></table></figure>
<p>注意在 DROP INDEX 语句中你要包含表的名字。</p>
<h3 id="创建聚簇索引"><a href="#创建聚簇索引" class="headerlink" title="创建聚簇索引"></a>创建聚簇索引</h3><p>要建立一个聚簇索引，可以使用关键字 CLUSTERED。一个表只能有一个聚簇索引。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE CLUSTERED INDEX mycolumn_clust_index ON mytable(mycolumn)</span><br></pre></td></tr></table></figure>
<h3 id="创建聚簇索引-允许值重复"><a href="#创建聚簇索引-允许值重复" class="headerlink" title="创建聚簇索引-允许值重复"></a>创建聚簇索引-允许值重复</h3><p>如果表中有重复的记录，当你视图用这个语句建立索引时，会出现错误。但是有重复记录的表也可以建立聚簇索引，需要使用关键字 ALLOW_DUP_ROW。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE CLUSTERED INDEX mycolumn_clust_index ON mytable(mycolumn) WITH ALLOW_DUP_ROW</span><br></pre></td></tr></table></figure>
<p>这个语句建立了一个允许重复记录的聚簇索引。你应该尽量避免在一个表中出现重复记录，但是，如果已经出现了，可以使用这种方法。</p>
<h3 id="创建唯一索引"><a href="#创建唯一索引" class="headerlink" title="创建唯一索引"></a>创建唯一索引</h3><p>要对一个表建立唯一索引，可以使用关键字 UNIQUE。对聚簇索引和非聚簇索引都可以使用这个关键字：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE UNIQUE CLUSTERED INDEX mycolumn_clust_index ON mytable(mycolumn)</span><br></pre></td></tr></table></figure>
<p>这是经常使用的索引建立语句。无论何时，只要可以，应该尽量对一个表建立唯一聚簇索引来增强查询操作。</p>
<p>注：唯一索引是指该字段不能有重复的值，而不是只能建立这一个索引。</p>
<h3 id="创建复合索引"><a href="#创建复合索引" class="headerlink" title="创建复合索引"></a>创建复合索引</h3><p>最后，要建立一个对多个字段的索引（复合索引）-在索引建立语句中同时包含多个字段名。下面的例子对 firstname 和 lastname 两个字段建立索引：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE INDEX name_index ON username(firstname,lastname)</span><br></pre></td></tr></table></figure>
<p>这个例子对两个字段建立了单个索引。在一个复合索引中，最多可以对 16 个字段进行索引。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/10/27/用-SQL-建立索引的方法/" data-id="cj1ycy7nr00c4kupv6z3r6tyt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-索引的填充因子" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/24/索引的填充因子/" class="article-date">
  <time datetime="2016-10-24T02:32:51.000Z" itemprop="datePublished">2016-10-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Microsoft-SQL-Server/">Microsoft SQL Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/24/索引的填充因子/">索引的填充因子</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>创建索引时，可以指定一个填充因子，以便在索引的每个叶级页上留出额外的间隙和保留一定百分比的空间，供将来表的数据存储容量进行扩充和减少页拆分的可能性。</p>
<p>填充因子的值是从 0 到 100 的百分比数值，指定在创建索引后对数据页的填充比例。<br>值为 100 时表示页将填满，所留出的存储空间量最小。只有当不会对数据进行更改时（例如，在只读表中）才会使用此设置。<br>值越小则数据页上的空闲空间越大，这样可以减少在索引增长过程中对数据页进行拆分的需要，但需要更多的存储空间。当表中数据会发生更改时，这种设置更为适当。</p>
<p>填充因子越大，意味着一个索引页包含的索引记录越多，空闲空间越小。一般来说查询的效率越高，因为这样查询的时候，可以减少读取索引页的工作量和减少内存使用。但这样导致的结果是数据变动导致的索引维护的工作量增加，因为索引页的空闲空间小，如果不能在本页内完成索引调整，就会引起调整其他索引页。</p>
<p><strong>所以一般的选择是，数据基本不变化的（例如OLAP的场景，数据只用来分析的），将填充因子设置到足够大；数据经常变化的（例如OLTP的场景），将填充因子设置为足够小。</strong></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/10/24/索引的填充因子/" data-id="cj1ycy7nu00c9kupvsq313xxy" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-Nagios-服务组定义" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/22/Nagios-服务组定义/" class="article-date">
  <time datetime="2016-10-22T09:17:07.000Z" itemprop="datePublished">2016-10-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Nagios/">Nagios</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/22/Nagios-服务组定义/">Nagios 服务组定义</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>之前做了主机组，但现在想对部分服务进行分组。在网上找了半天都没有相关教程，查看官方文档，但是照着做了半天都不成功<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">define servicegroup&#123;          </span><br><span class="line">        servicegroup_name       servicegroup_name(*)         </span><br><span class="line">        alias                   alias(*)         </span><br><span class="line">        members                 services        </span><br><span class="line">        servicegroup_members    servicegroups       </span><br><span class="line">        notes                   note_string         </span><br><span class="line">        notes_url               url         </span><br><span class="line">        action_url              url       </span><br><span class="line">        ...        </span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure></p>
<p>后来经排查发现是我的members定义格式有问题，以下是正确方法：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">1.# vim nagios.cfg     </span><br><span class="line">    </span><br><span class="line">cfg_file=/usr/local/nagios/etc/objects/servicegroups.cfg  #添加这一行    </span><br><span class="line">    </span><br><span class="line">2.在/usr/local/nagios/etc/objects/下建立servicegroups.cfg文件    </span><br><span class="line">    </span><br><span class="line">3.# vim servicegroups.cfg    </span><br><span class="line">    </span><br><span class="line"># check web   </span><br><span class="line">define servicegroup&#123;   </span><br><span class="line">    servicegroup_name       check_web   </span><br><span class="line">    alias                   check_web   </span><br><span class="line">    members                 155,check_w1,156,check_w2,157,check_w3   </span><br><span class="line">    &#125;   </span><br><span class="line">    </span><br><span class="line">#注意：members  这里要写成：主机1，服务，主机2，服务...的形式，我之前就是这里出错了。      </span><br><span class="line">    </span><br><span class="line">4.# checknagios   #检测配置文件   </span><br><span class="line">    </span><br><span class="line">5.# service nagios restart</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/10/22/Nagios-服务组定义/" data-id="cj1ycy7j8005mkupv72uqfddx" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  
    <article id="post-数据库镜像-基本命令" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/10/19/数据库镜像-基本命令/" class="article-date">
  <time datetime="2016-10-19T02:05:25.000Z" itemprop="datePublished">2016-10-19</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Microsoft-SQL-Server/">Microsoft SQL Server</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2016/10/19/数据库镜像-基本命令/">数据库镜像-基本命令</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <ul>
<li><p>查询数据库证书 select * from sys.certificates;</p>
</li>
<li><p>删除数据库证书 drop certificate xxx_cert;</p>
</li>
<li><p>查询数据库主密钥 select * from sys.symmetric_keys;</p>
</li>
<li><p>删除已有的密钥 drop master key;</p>
</li>
<li><p>查看终端点 select <em> from sys.database_mirroring_endpoints、select </em> from sys.endpoints;</p>
</li>
<li><p>删除终端点 drop endpoint xxx;</p>
</li>
<li><p>删除数据库镜像的正在还原模式</p>
</li>
</ul>
<ol>
<li>alter database xxx set partner off;</li>
<li>restore database xxx with recovery;</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://ttlop.com/2016/10/19/数据库镜像-基本命令/" data-id="cj1ycy7nd00bikupvg35na90d" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/20/">20</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Apache/">Apache</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Bat/">Bat</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Centos-7/">Centos 7</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HTTP/">HTTP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/HUAWEI/">HUAWEI</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hadoop/">Hadoop</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hexo/">Hexo</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Hyper-V/">Hyper-V</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Iptables/">Iptables</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux/">Linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Microsoft-SQL-Server/">Microsoft SQL Server</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/MikroTik/">MikroTik</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Mysql/">Mysql</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nagios/">Nagios</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Nginx/">Nginx</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/PHP/">PHP</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Postfix/">Postfix</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis/">Redis</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web/">Web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Windows/">Windows</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Zabbix/">Zabbix</a></li></ul>
    </div>
  </div>


  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">December 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">September 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">May 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2017/04/26/Python-列表类型功能解析/">Python 列表类型功能解析</a>
          </li>
        
          <li>
            <a href="/2017/04/25/Python-字符串类型功能解析/">Python 字符串类型功能解析</a>
          </li>
        
          <li>
            <a href="/2017/04/22/Python-编码转换/">Python 编码转换</a>
          </li>
        
          <li>
            <a href="/2017/04/21/Python-变量、基本数据类型/">Python 变量、基本数据类型</a>
          </li>
        
          <li>
            <a href="/2017/04/20/Python模块初识及用户输入打印/">Python模块初识及用户输入打印</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2017 XiaoYong Hu<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/About" class="mobile-nav-link">About</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>